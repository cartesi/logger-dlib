FROM cartesi/image-logger-test:latest

MAINTAINER Stephen Chen <stephen@cartesi.io>

ENV BASE /opt/cartesi

# Install basic development tools
# ----------------------------------------------------
RUN \
    apt-get update && \
    apt-get install --no-install-recommends -y \
        python3 python3-pip \
        python3-setuptools python3-wheel python3-dev

RUN mkdir -p $BASE/transferred_files

COPY ./manager_server/ $BASE/manager_server
COPY ./logger/ $BASE/logger
COPY ./lib/ $BASE/lib

# Installing python dependencies
# ----------------------------------------------------
COPY ./requirements.txt $BASE/

WORKDIR $BASE

RUN \
    pip3 install -r requirements.txt

WORKDIR $BASE/manager_server
